{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport invariant from 'fbjs/lib/invariant';\nvar EventTypes = ['url'];\nvar listeners = [];\nexport default {\n  addEventListener: function addEventListener(type, listener) {\n    invariant(EventTypes.indexOf(type) !== -1, \"Linking.addEventListener(): \" + type + \" is not a valid event\");\n    var nativeListener = function nativeListener(nativeEvent) {\n      return listener({\n        url: window.location.href,\n        nativeEvent: nativeEvent\n      });\n    };\n    listeners.push({\n      listener: listener,\n      nativeListener: nativeListener\n    });\n    window.addEventListener('message', nativeListener, false);\n  },\n  removeEventListener: function removeEventListener(type, listener) {\n    invariant(EventTypes.indexOf(type) !== -1, \"Linking.removeEventListener(): \" + type + \" is not a valid event.\");\n    var listenerIndex = listeners.findIndex(function (pair) {\n      return pair.listener === listener;\n    });\n    invariant(listenerIndex !== -1, 'Linking.removeEventListener(): cannot remove an unregistered event listener.');\n    var nativeListener = listeners[listenerIndex].nativeListener;\n    window.removeEventListener('message', nativeListener, false);\n    listeners.splice(listenerIndex, 1);\n  },\n  canOpenURL: function canOpenURL(url) {\n    return _regeneratorRuntime.async(function canOpenURL$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", true);\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  getInitialURL: function getInitialURL() {\n    return _regeneratorRuntime.async(function getInitialURL$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (canUseDOM) {\n              _context2.next = 2;\n              break;\n            }\n            return _context2.abrupt(\"return\", '');\n          case 2:\n            return _context2.abrupt(\"return\", window.location.href);\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  openURL: function openURL(url) {\n    return _regeneratorRuntime.async(function openURL$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (canUseDOM) {\n              window.location = new URL(url, window.location).toString();\n            }\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n};","map":{"version":3,"sources":["../src/ExpoLinking.web.ts"],"names":[],"mappings":";AAAA,SAAS,SAAS,QAAQ,+BAA+B;AACzD,OAAO,SAAS,MAAM,oBAAoB;AAI1C,IAAM,UAAU,GAAG,CAAC,KAAK,CAAC;AAE1B,IAAM,SAAS,GAAmE,EAAE;AAEpF,eAAe;EACb,gBAAgB,4BAAC,IAAW,EAAE,QAAqB,EAAA;IACjD,SAAS,CACP,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,mCACA,IAAI,2BACpC;IACD,IAAM,cAAc,GAAsB,SAApC,cAAc,CAAsB,WAAW;MAAA,OACnD,QAAQ,CAAC;QAAE,GAAG,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI;QAAE,WAAW,EAAX;MAAW,CAAE,CAAC;IAAA;IACtD,SAAS,CAAC,IAAI,CAAC;MAAE,QAAQ,EAAR,QAAQ;MAAE,cAAc,EAAd;IAAc,CAAE,CAAC;IAC5C,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,cAAc,EAAE,KAAK,CAAC;EAC3D,CAAC;EAED,mBAAmB,+BAAC,IAAW,EAAE,QAAqB,EAAA;IACpD,SAAS,CACP,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,sCACG,IAAI,4BACvC;IACD,IAAM,aAAa,GAAG,SAAS,CAAC,SAAS,CAAC,UAAA,IAAI;MAAA,OAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ;IAAA,EAAC;IAC7E,SAAS,CACP,aAAa,KAAK,CAAC,CAAC,EACpB,8EAA8E,CAC/E;IACD,IAAM,cAAc,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,cAAc;IAC9D,MAAM,CAAC,mBAAmB,CAAC,SAAS,EAAE,cAAc,EAAE,KAAK,CAAC;IAC5D,SAAS,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,CAAC;EACpC,CAAC;EAEK,UAAU,sBAAC,GAAW;IAAA;MAAA;QAAA;UAAA;YAAA,iCAEnB,IAAI;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA;EAGP,aAAa;IAAA;MAAA;QAAA;UAAA;YAAA,IACZ,SAAS;cAAA;cAAA;YAAA;YAAA,kCAAS,EAAE;UAAA;YAAA,kCAClB,MAAM,CAAC,QAAQ,CAAC,IAAI;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA;EAGvB,OAAO,mBAAC,GAAW;IAAA;MAAA;QAAA;UAAA;YACvB,IAAI,SAAS,EAAE;cAEb,MAAM,CAAC,QAAQ,GAAG,IAAI,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE;;UAC3D;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA;CAEJ","sourcesContent":["import { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport invariant from 'fbjs/lib/invariant';\n\nimport { NativeURLListener, URLListener } from './Linking.types';\n\nconst EventTypes = ['url'];\n\nconst listeners: { listener: URLListener; nativeListener: NativeURLListener }[] = [];\n\nexport default {\n  addEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.addEventListener(): ${type} is not a valid event`\n    );\n    const nativeListener: NativeURLListener = nativeEvent =>\n      listener({ url: window.location.href, nativeEvent });\n    listeners.push({ listener, nativeListener });\n    window.addEventListener('message', nativeListener, false);\n  },\n\n  removeEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.removeEventListener(): ${type} is not a valid event.`\n    );\n    const listenerIndex = listeners.findIndex(pair => pair.listener === listener);\n    invariant(\n      listenerIndex !== -1,\n      'Linking.removeEventListener(): cannot remove an unregistered event listener.'\n    );\n    const nativeListener = listeners[listenerIndex].nativeListener;\n    window.removeEventListener('message', nativeListener, false);\n    listeners.splice(listenerIndex, 1);\n  },\n\n  async canOpenURL(url: string): Promise<boolean> {\n    // In reality this should be able to return false for links like `chrome://` on chrome.\n    return true;\n  },\n\n  async getInitialURL(): Promise<string> {\n    if (!canUseDOM) return '';\n    return window.location.href;\n  },\n\n  async openURL(url: string): Promise<void> {\n    if (canUseDOM) {\n      // @ts-ignore\n      window.location = new URL(url, window.location).toString();\n    }\n  },\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}